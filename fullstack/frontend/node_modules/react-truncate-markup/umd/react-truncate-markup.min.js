/*!
 * react-truncate-markup v4.1.0
 * Apache-2.0 Licensed
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactTruncateMarkup=e(require("react")):t.ReactTruncateMarkup=e(t.React)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return w});var s,c,a=n(2),u=n.n(a),h=n(3),l=n.n(h),p=n(5),f=n(7),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},y={LEFT:!0,RIGHT:!1},b=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return n;if("string"==typeof e)return n+e;if(Array.isArray(e)){var i=n;return e.forEach(function(e){i=t(e,i)}),i}return t(e.props.children,n)},g=function(t){return f.a[t]||f.a.characters},_=function(t,e,n,i){return v({},t,{props:v({},t.props,{style:v({},t.props.style,n?{display:(t.props.style||{}).display||"block"}:2===i?{display:(t.props.style||{}).display||"inline-block"}:{}),children:e})})},m=function t(e){return"string"==typeof e||"function"!=typeof e.type&&(!e.props.children||(Array.isArray(e.props.children)?e.props.children.reduce(function(e,n){return e&&t(n)},!0):t(e.props.children)))},w=(c=s=function(t){function e(){var n,o,s;i(this,e);for(var c=arguments.length,a=Array(c),u=0;u<c;u++)a[u]=arguments[u];return n=o=r(this,t.call.apply(t,[this].concat(a))),o.state={text:o.childrenElementWithRef(o.props.children)},o.isValid=m(o.props.children),o.lineHeight=null,o.splitDirectionSeq=[],o.shouldTruncate=!0,o.wasLastCharTested=!1,o.endFound=!1,o.latestThatFits=null,o.origText=null,o.onTruncateCalled=!1,o.policy=null,o.onTruncate=function(t){o.onTruncateCalled||(o.onTruncateCalled=!0,o.props.onTruncate(t))},o.handleResize=function(){var t=!0;o.resizeObserver=new p.a(function(){t?t=!1:(o.shouldTruncate=!1,o.latestThatFits=null,o.setState({text:o.origText},function(){o.shouldTruncate=!0,o.onTruncateCalled=!1,o.truncate()}))}),o.resizeObserver.observe(o.el)},s=n,r(o,s)}return o(e,t),e.prototype.componentDidMount=function(){this.isValid&&(this.origText=this.state.text,this.lineHeight=this.props.lineHeight||l()(this.el),this.policy=g(this.props.tokenize),this.truncate(),this.handleResize())},e.prototype.UNSAFE_componentWillReceiveProps=function(t){var e=this;this.resizeObserver&&this.resizeObserver.disconnect(),this.policy=g(t.tokenize),this.shouldTruncate=!1,this.latestThatFits=null,this.isValid=m(t.children),this.setState({text:this.childrenElementWithRef(t.children)},function(){e.isValid&&(e.origText=e.state.text,e.lineHeight=t.lineHeight||l()(e.el),e.shouldTruncate=!0,e.truncate(),e.handleResize())})},e.prototype.componentDidUpdate=function(){if(!1!==this.shouldTruncate&&!1!==this.isValid)return this.endFound?this.state.text!==this.latestThatFits?void this.setState({text:this.latestThatFits}):void this.onTruncate(!0):void(this.splitDirectionSeq.length&&(this.fits()?(this.latestThatFits=this.state.text,this.splitDirectionSeq.splice(this.splitDirectionSeq.length-1,1,y.RIGHT,y.LEFT)):this.splitDirectionSeq.push(y.LEFT),this.tryToFit(this.origText,this.splitDirectionSeq)))},e.prototype.componentWillUnmount=function(){this.resizeObserver&&this.resizeObserver.disconnect(),this.lineHeight=null,this.origText=null,this.latestThatFits=null,this.splitDirectionSeq=[]},e.prototype.truncate=function(){if(this.fits())return this.shouldTruncate=!1,void this.onTruncate(!1);this.truncateOriginalText()},e.prototype.childrenElementWithRef=function(t){var e=this,n=u.a.Children.only(t);return u.a.cloneElement(n,{ref:function(t){return e.el=t}})},e.prototype.truncateOriginalText=function(){this.endFound=!1,this.splitDirectionSeq=[y.LEFT],this.wasLastCharTested=!1,this.tryToFit(this.origText,this.splitDirectionSeq)},e.prototype.tryToFit=function(t,e){if(t.props.children){var n=this.split(t,e,!0),i="function"==typeof this.props.ellipsis?this.props.ellipsis(n):this.props.ellipsis;i="object"===(void 0===i?"undefined":d(i))?u.a.cloneElement(i,{key:"ellipsis"}):i;var r=n.props.children,o=Array.isArray(r)?[].concat(r,[i]):[r,i],s=b(r)!==b(this.origText);this.setState({text:v({},n,{props:v({},n.props,{style:v({wordWrap:"break-word"},n.props.style),children:s?o:r})})})}},e.prototype.split=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return t;if("string"==typeof t)return this.splitString(t,e,i);if(Array.isArray(t))return this.splitArray(t,e,i);var r=this.split(t.props.children,e,!1,i+1);return _(t,r,n,i)},e.prototype.splitString=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2];if(!e.length)return t;if(e.length&&this.policy.isAtomic(t))return this.wasLastCharTested?this.endFound=!0:this.wasLastCharTested=!0,t;if(this.policy.tokenizeString){return this.splitArray(this.policy.tokenizeString(t),e,n).join("")}var i=e[0],r=e.slice(1),o=Math.ceil(t.length/2),s=t.substring(0,o);if(i===y.LEFT)return this.splitString(s,r,n);var c=t.substring(o);return s+this.splitString(c,r,n)},e.prototype.splitArray=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2];if(!e.length)return t;if(1===t.length){var i=t[0];if("string"==typeof i)return[this.splitString(i,e,n)];var r=i.props.children,o=this.split(r,e,!1,n+1);return[_(i,o,!1,n)]}var s=e[0],c=e.slice(1),a=Math.ceil(t.length/2),u=t.slice(0,a);if(s===y.LEFT)return this.splitArray(u,c,n);var h=t.slice(a);return u.concat(this.splitArray(h,c,n))},e.prototype.fits=function(){var t=this.props.lines,e=this.el.getBoundingClientRect(),n=e.height,i=Math.round(n/parseFloat(this.lineHeight));return t>=i},e.prototype.render=function(){return this.state.text},e}(u.a.Component),s.defaultProps={lines:1,ellipsis:"...",lineHeight:"",onTruncate:function(){},tokenize:"characters"},c)},function(e,n){e.exports=t},function(t,e,n){function i(t){var e=r(t,"line-height"),n=parseFloat(e,10);if(e===n+""){var i=t.style.lineHeight;t.style.lineHeight=e+"em",e=r(t,"line-height"),n=parseFloat(e,10),i?t.style.lineHeight=i:delete t.style.lineHeight}if(-1!==e.indexOf("pt")?(n*=4,n/=3):-1!==e.indexOf("mm")?(n*=96,n/=25.4):-1!==e.indexOf("cm")?(n*=96,n/=2.54):-1!==e.indexOf("in")?n*=96:-1!==e.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===e){var o=t.nodeName,s=document.createElement(o);s.innerHTML="&nbsp;","TEXTAREA"===o.toUpperCase()&&s.setAttribute("rows","1");var c=r(t,"font-size");s.style.fontSize=c,s.style.padding="0px",s.style.border="0px";var a=document.body;a.appendChild(s);n=s.offsetHeight,a.removeChild(s)}return n}var r=n(4);t.exports=i},function(t,e){var n=function(t,e,n){return n=window.getComputedStyle,(n?n(t):t.currentStyle)[e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()})]};t.exports=n},function(t,e,n){"use strict";(function(t){function n(t){return parseFloat(t)||0}function i(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return e.reduce(function(e,i){return e+n(t["border-"+i+"-width"])},0)}function r(t){for(var e=["top","right","bottom","left"],i={},r=0,o=e;r<o.length;r+=1){var s=o[r],c=t["padding-"+s];i[s]=n(c)}return i}function o(t){var e=t.getBBox();return h(0,0,e.width,e.height)}function s(t){var e=t.clientWidth,o=t.clientHeight;if(!e&&!o)return T;var s=w(t).getComputedStyle(t),a=r(s),u=a.left+a.right,l=a.top+a.bottom,p=n(s.width),f=n(s.height);if("border-box"===s.boxSizing&&(Math.round(p+u)!==e&&(p-=i(s,"left","right")+u),Math.round(f+l)!==o&&(f-=i(s,"top","bottom")+l)),!c(t)){var d=Math.round(p+u)-e,v=Math.round(f+l)-o;1!==Math.abs(d)&&(p-=d),1!==Math.abs(v)&&(f-=v)}return h(a.left,a.top,p,f)}function c(t){return t===w(t).document.documentElement}function a(t){return p?O(t)?o(t):s(t):T}function u(t){var e=t.x,n=t.y,i=t.width,r=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return m(s,{x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:r+n,left:e}),s}function h(t,e,n,i){return{x:t,y:e,width:n,height:i}}var l=function(){function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return"undefined"!=typeof Map?Map:function(){function e(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){var n=this;void 0===e&&(e=null);for(var i=0,r=n.__entries__;i<r.length;i+=1){var o=r[i];t.call(e,o[1],o[0])}},Object.defineProperties(e.prototype,n),e}()}(),p="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,f=function(){return void 0!==t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),d=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(f):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),v=2,y=function(t,e){function n(){o&&(o=!1,t()),s&&r()}function i(){d(n)}function r(){var t=Date.now();if(o){if(t-c<v)return;s=!0}else o=!0,s=!1,setTimeout(i,e);c=t}var o=!1,s=!1,c=0;return r},b=["top","right","bottom","left","width","height","size","weight"],g="undefined"!=typeof MutationObserver,_=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=y(this.refresh.bind(this),20)};_.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},_.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},_.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},_.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},_.prototype.connect_=function(){p&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),g?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},_.prototype.disconnect_=function(){p&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},_.prototype.onTransitionEnd_=function(t){var e=t.propertyName;void 0===e&&(e=""),b.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},_.getInstance=function(){return this.instance_||(this.instance_=new _),this.instance_},_.instance_=null;var m=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n+=1){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},w=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||f},T=h(0,0,0,0),O=function(){return"undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof w(t).SVGGraphicsElement}:function(t){return t instanceof w(t).SVGElement&&"function"==typeof t.getBBox}}(),E=function(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=h(0,0,0,0),this.target=t};E.prototype.isActive=function(){var t=a(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},E.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var x=function(t,e){var n=u(e);m(this,{target:t,contentRect:n})},A=function(t,e,n){if(this.activeObservations_=[],this.observations_=new l,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n};A.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof w(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new E(t)),this.controller_.addObserver(this),this.controller_.refresh())}},A.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof w(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},A.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},A.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},A.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new x(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},A.prototype.clearActive=function(){this.activeObservations_.splice(0)},A.prototype.hasActive=function(){return this.activeObservations_.length>0};var S="undefined"!=typeof WeakMap?new WeakMap:new l,M=function(t){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=_.getInstance(),n=new A(t,e,this);S.set(this,n)};["observe","unobserve","disconnect"].forEach(function(t){M.prototype[t]=function(){return(e=S.get(this))[t].apply(e,arguments);var e}});var F=function(){return void 0!==f.ResizeObserver?f.ResizeObserver:M}();e.a=F}).call(e,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i={characters:{tokenizeString:null,isAtomic:function(t){return t.length<=1}},words:{tokenizeString:function(t){return t.match(/(\s*\S[\S\xA0]*)/g)},isAtomic:function(t){return/^\s*[\S\xA0]*\s*$/.test(t)}}};e.a=i}])});
//# sourceMappingURL=react-truncate-markup.min.js.map