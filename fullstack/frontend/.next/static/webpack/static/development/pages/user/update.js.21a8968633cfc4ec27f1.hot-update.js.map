{"version":3,"file":"static/webpack/static\\development\\pages\\user\\update.js.21a8968633cfc4ec27f1.hot-update.js","sources":["webpack:///./components/auth/ProfileUpdate.js"],"sourcesContent":["import Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport Router from 'next/router';\r\nimport { getCookie, isAuth, updateUser } from '../../actions/auth';\r\nimport { getProfile, update } from '../../actions/user';\r\nimport { API } from '../../config';\r\nimport { imageupload } from '../../actions/imgur';\r\n\r\nimport { Form, FormGroup, FormControl, ControlLabel, HelpBlock, Grid, Row, Col } from 'rsuite';\r\n\r\nconst ProfileUpdate = () => {\r\n\tconst [ values, setValues ] = useState({\r\n\t\tusername: '',\r\n\t\tname: '',\r\n\t\temail: '',\r\n\t\tavatar: '',\r\n\t\tcover: '',\r\n\t\tabout: '',\r\n\t\tblood: '',\r\n\t\tcontact: '',\r\n\t\taddress: '',\r\n\t\tpassword: '',\r\n\t\terror: false,\r\n\t\tsuccess: false,\r\n\t\tloading: false,\r\n\t\tphoto: '',\r\n\t\tuserData: ''\r\n\t});\r\n\r\n\tconst token = getCookie('token');\r\n\tconst {\r\n\t\tusername,\r\n\t\tname,\r\n\t\temail,\r\n\t\tavatar,\r\n\t\tcover,\r\n\t\tabout,\r\n\t\tblood,\r\n\t\tcontact,\r\n\t\taddress,\r\n\t\tpassword,\r\n\t\terror,\r\n\t\tsuccess,\r\n\t\tloading,\r\n\t\tphoto,\r\n\t\tuserData\r\n\t} = values;\r\n\r\n\tconst init = () => {\r\n\t\tgetProfile(token).then((data) => {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tsetValues({ ...values, error: data.error });\r\n\t\t\t} else {\r\n\t\t\t\tsetValues({\r\n\t\t\t\t\t...values,\r\n\t\t\t\t\tusername: data.username,\r\n\t\t\t\t\tname: data.name,\r\n\t\t\t\t\temail: data.email,\r\n\t\t\t\t\tavatar: data.avatar,\r\n\t\t\t\t\tcover: data.cover,\r\n\t\t\t\t\tabout: data.about,\r\n\t\t\t\t\tblood: data.blood,\r\n\t\t\t\t\tcontact: data.contact,\r\n\t\t\t\t\taddress: data.address\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tinit();\r\n\t}, []);\r\n\r\n\tconst [ bloodGroups, setBloodGroups ] = useState([\r\n\t\t{ label: 'A+', value: 'A+' },\r\n\t\t{ label: 'A-', value: 'A-' },\r\n\t\t{ label: 'B+', value: 'B+' },\r\n\t\t{ label: 'B-', value: 'B-' },\r\n\t\t{ label: 'AB+', value: 'AB+' },\r\n\t\t{ label: 'AB-', value: 'AB-' },\r\n\t\t{ label: 'O+', value: 'O+' },\r\n\t\t{ label: 'O-', value: 'O-' }\r\n\t]);\r\n\r\n\tconst handleChange = (name) => (e) => {\r\n\t\tconst value = name === 'photo' ? e.target.files[0] : e;\r\n\t\tlet userFormData = new FormData();\r\n\t\tuserFormData.set(name, value);\r\n\t\tsetValues({ ...values, [name]: value, userData: userFormData, error: false, success: false });\r\n\t};\r\n\r\n\tconst handleBloodChange = (e, { value }) => {\r\n\t\tuserFormData.set('blood', e);\r\n\t\tsetBloodGroups(e);\r\n\t};\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tsetValues({ ...values, loading: true });\r\n\t\tupdate(token, userData).then((data) => {\r\n\t\t\tif (data.error) {\r\n\t\t\t\tsetValues({ ...values, error: data.error, success: false, loading: false });\r\n\t\t\t} else {\r\n\t\t\t\tupdateUser(data, () => {\r\n\t\t\t\t\tsetValues({\r\n\t\t\t\t\t\t...values,\r\n\t\t\t\t\t\tusername: data.username,\r\n\t\t\t\t\t\tname: data.name,\r\n\t\t\t\t\t\temail: data.email,\r\n\t\t\t\t\t\tavatar: data.avatar,\r\n\t\t\t\t\t\tcover: data.cover,\r\n\t\t\t\t\t\tabout: data.about,\r\n\t\t\t\t\t\tpassword: '',\r\n\t\t\t\t\t\tblood: data.blood,\r\n\t\t\t\t\t\tcontact: data.contact,\r\n\t\t\t\t\t\taddress: data.address,\r\n\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\tloading: false\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t// const profileUpdateForm = () => (\r\n\t//     <form onSubmit={handleSubmit}>\r\n\t//         <div className=\"form-group\">\r\n\t//             <label className=\"btn btn-outline-info\">\r\n\t//                 Profile photo\r\n\t//                 <input onChange={handleChange('photo')} type=\"file\" accept=\"image/*\" hidden />\r\n\t//             </label>\r\n\t//         </div>\r\n\t//         <div className=\"form-group\">\r\n\t//             <label className=\"text-muted\">Username</label>\r\n\t//             <input onChange={handleChange('username')} type=\"text\" value={username} className=\"form-control\" />\r\n\t//         </div>\r\n\t//         <div className=\"form-group\">\r\n\t//             <label className=\"text-muted\">Name</label>\r\n\t//             <input onChange={handleChange('name')} type=\"text\" value={name} className=\"form-control\" />\r\n\t//         </div>\r\n\t//         <div className=\"form-group\">\r\n\t//             <label className=\"text-muted\">Email</label>\r\n\t//             <input onChange={handleChange('email')} type=\"text\" value={email} className=\"form-control\" />\r\n\t//         </div>\r\n\t//         <div className=\"form-group\">\r\n\t//             <label className=\"text-muted\">About</label>\r\n\t//             <textarea onChange={handleChange('about')} type=\"text\" value={about} className=\"form-control\" />\r\n\t//         </div>\r\n\t//         <div className=\"form-group\">\r\n\t//             <label className=\"text-muted\">Password</label>\r\n\t//             <input onChange={handleChange('password')} type=\"password\" value={password} className=\"form-control\" />\r\n\t//         </div>\r\n\t//         <div>\r\n\t//             <button type=\"submit\" className=\"btn btn-primary\">\r\n\t//                 Submit\r\n\t//             </button>\r\n\t//         </div>\r\n\t//     </form>\r\n\t// );\r\n\r\n\t// const showError = () => (\r\n\t//     <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n\t//         {error}\r\n\t//     </div>\r\n\t// );\r\n\r\n\t// const showSuccess = () => (\r\n\t//     <div className=\"alert alert-success\" style={{ display: success ? '' : 'none' }}>\r\n\t//         Profile updated\r\n\t//     </div>\r\n\t// );\r\n\r\n\t// const showLoading = () => (\r\n\t//     <div className=\"alert alert-info\" style={{ display: loading ? '' : 'none' }}>\r\n\t//         Loading...\r\n\t//     </div>\r\n\t// );\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Grid fluid>\r\n\t\t\t\t<Row className=\"show-grid\">\r\n\t\t\t\t\t<Col xs={24}>\r\n\t\t\t\t\t\t<Form fluid onSubmit={handleSubmit}>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<ControlLabel>Username</ControlLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tvalue={username}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange('username')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<ControlLabel>Full Name</ControlLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tvalue={name}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange('name')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<ControlLabel>Email</ControlLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange('email')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<ControlLabel>About</ControlLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Write about yourself\"\r\n\t\t\t\t\t\t\t\t\tcomponentClass=\"textarea\"\r\n\t\t\t\t\t\t\t\t\trows={5}\r\n\t\t\t\t\t\t\t\t\tvalue={about}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange('about')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t\t<SelectPicker\r\n\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\tdata={bloodGroups}\r\n\t\t\t\t\t\t\t\t\tvalue={blood}\r\n\t\t\t\t\t\t\t\t\tonChange={handleBloodChange}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Select Blood Group\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n                            <FormGroup>\r\n\t\t\t\t\t\t\t\t<ControlLabel>Contact No</ControlLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tvalue={contact}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange('contact')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n                            <FormGroup>\r\n\t\t\t\t\t\t\t\t<ControlLabel>Address</ControlLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tvalue={address}\r\n\t\t\t\t\t\t\t\t\tonChange={handleChange('address')}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n                            <Button appearance=\"primary\" block type=\"submit\">\r\n\t\t\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Grid>\r\n\t\t\t{/* <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-4\">\r\n                        <img\r\n                            src={`${API}/user/photo/${username}`}\r\n                            className=\"img img-fluid img-thumbnail mb-3\"\r\n                            style={{ maxHeight: 'auto', maxWidth: '100%' }}\r\n                            alt=\"user profile\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"col-md-8 mb-5\">\r\n                        {showSuccess()}\r\n                        {showError()}\r\n                        {showLoading()}\r\n                        {profileUpdateForm()}\r\n                    </div>\r\n                </div>\r\n            </div> */}\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default ProfileUpdate;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AADA;AAAA;AACA;AAkBA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAqCA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9DA;AAgEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAvEA;AAAA;AACA;AAyEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2BA;AACA;AACA;;;;A","sourceRoot":""}